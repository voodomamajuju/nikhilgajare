<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pictures Upload</title>

  <!-- Fonts + CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@500;700&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />

  <!-- Supabase SDK (defer so it loads before our init) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
</head>

<body>
  <main class="page">
    <section class="card" aria-labelledby="title">
      <header class="header">
        <h1 id="title" class="title">Pictures with Glam Makeup</h1>
        <p class="subtitle">Do you do Glam Makeup?</p>
      </header>

      <form id="glamForm" class="form" enctype="multipart/form-data" novalidate>
        <div class="field">
          <div class="options">
            <label class="checkbox-label">
              <input type="radio" id="glamYes" name="glam_makeup" value="yes" required>
              <span class="custom-checkbox"></span>
              Yes
            </label>

            <label class="checkbox-label">
              <input type="radio" id="glamNo" name="glam_makeup" value="no">
              <span class="custom-checkbox"></span>
              No
            </label>
          </div>
        </div>

        <!-- Uploads (hidden until YES selected) -->
        <div id="glam-upload" class="field hidden" aria-hidden="true">
          <label for="makeup-pics" class="label">Upload your glam photos</label>
          <input id="makeup-pics" name="makeup_pics" type="file" accept="image/jpeg,image/jpg,image/png,image/webp" multiple class="input"
            disabled />
          <small id="upload-note" class="note"></small>
        </div>

        <!-- Actions -->
        <div class="actions">
          <button type="submit" id="submitBtn" class="btn">Save & Submit</button>
        </div>
      </form>
    </section>
  </main>

  <script>
    // --------- UI toggle for YES/NO ----------
    const glamYes = document.getElementById('glamYes');
    const glamNo = document.getElementById('glamNo');
    const uploadBlock = document.getElementById('glam-upload');
    const fileInput = document.getElementById('makeup-pics');
    const uploadNote = document.getElementById('upload-note');
    const submitBtn = document.getElementById('submitBtn');

    function updateGlam() {
      if (glamYes.checked) {
        uploadBlock.classList.remove('hidden');
        uploadBlock.setAttribute('aria-hidden', 'false');
        fileInput.disabled = false;
        fileInput.required = true;
      } else {
        uploadBlock.classList.add('hidden');
        uploadBlock.setAttribute('aria-hidden', 'true');
        fileInput.disabled = true;
        fileInput.required = false;
        fileInput.value = ''; // clear
      }
    }

    glamYes.addEventListener('change', updateGlam);
    glamNo.addEventListener('change', updateGlam);
    document.addEventListener('DOMContentLoaded', () => {
      updateGlam();
      if (uploadNote) uploadNote.textContent = 'Up to 5 images • JPG/PNG • Max 5MB each';
    });
  </script>


  <!-- Supabase SDK (defer so it loads before our init) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

  <!-- externalized module with all page logic (glam toggle + upload + DB insert) -->
  <script type="module" src="picturesupload.js"></script>
</body>

</html>